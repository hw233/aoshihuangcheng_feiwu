!function(t){function e(t,e){this.setNotifyMethod(t),this.setNotifyContext(e)}function n(t,e,n){this.name=t,this.body=e,this.type=n}function o(){}function i(){}function r(){this.subCommands=[],this.initializeMacroCommand()}function s(t,e){this.mediatorName=t||this.constructor.NAME,this.viewComponent=e}function a(t,e){this.proxyName=t||this.constructor.NAME,null!=e&&this.setData(e)}function p(t){if(null!=p.instanceMap[t])throw new Error(p.MULTITON_MSG);this.initializeNotifier(t),p.instanceMap[t]=this,this.initializeFacade()}function u(t){if(null!=u.instanceMap[t])throw new Error(u.MULTITON_MSG);this.multitonKey=t,u.instanceMap[this.multitonKey]=this,this.mediatorMap=[],this.observerMap=[],this.initializeView()}function l(t){if(l.instanceMap[t])throw new Error(l.MULTITON_MSG);this.multitonKey=t,l.instanceMap[t]=this,this.proxyMap=[],this.initializeModel()}function c(t){if(null!=c.instanceMap[t])throw new Error(c.MULTITON_MSG);this.multitonKey=t,c.instanceMap[this.multitonKey]=this,this.commandMap=new Array,this.initializeController()}function h(t,e,n){for(var o,i,r=t.split("."),s=n||f.global,a=0,p=r.length;p>a;a++)o=s,i=r[a],s=null==s[i]?s[i]={}:s[i];return null==e?s:o[i]=e}function y(t,e,n){t||(t={});var o,i,r=t.name,s=t.parent,a="function"==typeof s,p=t.scope||null;if("parent"in t&&!a)throw new TypeError("Class parent must be Function");if(t.hasOwnProperty("constructor")){if(o=t.constructor,"function"!=typeof o)throw new TypeError("Class constructor must be Function")}else o=a?function(){s.apply(this,arguments)}:new Function;if(a&&f.extend(o,s),e&&(i=o.prototype,f.decorate(i,e),i.constructor=o),n&&f.decorate(o,n),r){if("string"!=typeof r)throw new TypeError("Class name must be primitive string");h(r,o,p)}return o}if(null==t&&(t=window),!t.puremvc){e.prototype.setNotifyMethod=function(t){this.notify=t},e.prototype.setNotifyContext=function(t){this.context=t},e.prototype.getNotifyMethod=function(){return this.notify},e.prototype.getNotifyContext=function(){return this.context},e.prototype.notifyObserver=function(t){this.getNotifyMethod().call(this.getNotifyContext(),t)},e.prototype.compareNotifyContext=function(t){return t===this.context},e.prototype.notify=null,e.prototype.context=null,n.prototype.getName=function(){return this.name},n.prototype.setBody=function(t){this.body=t},n.prototype.getBody=function(){return this.body},n.prototype.setType=function(t){this.type=t},n.prototype.getType=function(){return this.type},n.prototype.toString=function(){var t="Notification Name: "+this.getName();return t+="\nBody:"+(null==this.body?"null":this.body.toString()),t+="\nType:"+(null==this.type?"null":this.type)},n.prototype.name=null,n.prototype.type=null,n.prototype.body=null,o.prototype.sendNotification=function(t,e,n){var o=this.getFacade();o&&o.sendNotification(t,e,n)},o.prototype.facade,o.prototype.initializeNotifier=function(t){this.multitonKey=String(t),this.facade=this.getFacade()},o.prototype.getFacade=function(){if(null==this.multitonKey)throw new Error(o.MULTITON_MSG);return p.getInstance(this.multitonKey)},o.prototype.multitonKey=null,o.MULTITON_MSG="multitonKey for this Notifier not yet initialized!",i.prototype=new o,i.prototype.constructor=i,i.prototype.execute=function(t){},r.prototype=new o,r.prototype.constructor=r,r.prototype.subCommands=null,r.prototype.initializeMacroCommand=function(){},r.prototype.addSubCommand=function(t){this.subCommands.push(t)},r.prototype.execute=function(t){for(;this.subCommands.length>0;){var e=this.subCommands.shift(),n=new e;n.initializeNotifier(this.multitonKey),n.execute(t)}},s.NAME="Mediator",s.prototype=new o,s.prototype.constructor=s,s.prototype.getMediatorName=function(){return this.mediatorName},s.prototype.setViewComponent=function(t){this.viewComponent=t},s.prototype.getViewComponent=function(){return this.viewComponent},s.prototype.listNotificationInterests=function(){return[]},s.prototype.handleNotification=function(t){},s.prototype.onRegister=function(){},s.prototype.onRemove=function(){},s.prototype.mediatorName=null,s.prototype.viewComponent=null,a.NAME="Proxy",a.prototype=new o,a.prototype.constructor=a,a.prototype.getProxyName=function(){return this.proxyName},a.prototype.setData=function(t){this.data=t},a.prototype.getData=function(){return this.data},a.prototype.onRegister=function(){},a.prototype.onRemove=function(){},a.prototype.proxyName=null,a.prototype.data=null,p.prototype.initializeFacade=function(){this.initializeModel(),this.initializeController(),this.initializeView()},p.getInstance=function(t){return null==t?null:(null==p.instanceMap[t]&&(p.instanceMap[t]=new p(t)),p.instanceMap[t])},p.prototype.initializeController=function(){null==this.controller&&(this.controller=c.getInstance(this.multitonKey))},p.prototype.initializeModel=function(){null==this.model&&(this.model=l.getInstance(this.multitonKey))},p.prototype.initializeView=function(){null==this.view&&(this.view=u.getInstance(this.multitonKey))},p.prototype.registerCommand=function(t,e){this.controller.registerCommand(t,e)},p.prototype.removeCommand=function(t){this.controller.removeCommand(t)},p.prototype.hasCommand=function(t){return this.controller.hasCommand(t)},p.prototype.registerProxy=function(t){this.model.registerProxy(t)},p.prototype.retrieveProxy=function(t){return this.model.retrieveProxy(t)},p.prototype.removeProxy=function(t){var e=null;return null!=this.model&&(e=this.model.removeProxy(t)),e},p.prototype.hasProxy=function(t){return this.model.hasProxy(t)},p.prototype.registerMediator=function(t){null!=this.view&&this.view.registerMediator(t)},p.prototype.retrieveMediator=function(t){return this.view.retrieveMediator(t)},p.prototype.removeMediator=function(t){var e=null;return null!=this.view&&(e=this.view.removeMediator(t)),e},p.prototype.hasMediator=function(t){return this.view.hasMediator(t)},p.prototype.sendNotification=function(t,e,o){this.notifyObservers(new n(t,e,o))},p.prototype.notifyObservers=function(t){null!=this.view&&this.view.notifyObservers(t)},p.prototype.initializeNotifier=function(t){this.multitonKey=t},p.hasCore=function(t){return null!=p.instanceMap[t]},p.removeCore=function(t){null!=p.instanceMap[t]&&(l.removeModel(t),u.removeView(t),c.removeController(t),delete p.instanceMap[t])},p.prototype.controller=null,p.prototype.model=null,p.prototype.view=null,p.prototype.multitonKey=null,p.instanceMap=[],p.MULTITON_MSG="Facade instance for this Multiton key already constructed!",u.prototype.initializeView=function(){},u.getInstance=function(t){return null==t?null:(null==u.instanceMap[t]&&(u.instanceMap[t]=new u(t)),u.instanceMap[t])},u.prototype.registerObserver=function(t,e){null!=this.observerMap[t]?this.observerMap[t].push(e):this.observerMap[t]=[e]},u.prototype.notifyObservers=function(t){if(null!=this.observerMap[t.getName()]){for(var e,n=this.observerMap[t.getName()],o=[],i=0;i<n.length;i++)e=n[i],o.push(e);for(var i=0;i<o.length;i++)e=o[i],e.notifyObserver(t)}},u.prototype.removeObserver=function(t,e){for(var n=this.observerMap[t],o=0;o<n.length;o++)if(1==n[o].compareNotifyContext(e)){n.splice(o,1);break}0==n.length&&delete this.observerMap[t]},u.prototype.registerMediator=function(t){if(null==this.mediatorMap[t.getMediatorName()]){t.initializeNotifier(this.multitonKey),this.mediatorMap[t.getMediatorName()]=t;var n=t.listNotificationInterests();if(n.length>0)for(var o=new e(t.handleNotification,t),i=0;i<n.length;i++)this.registerObserver(n[i],o);t.onRegister()}},u.prototype.retrieveMediator=function(t){return this.mediatorMap[t]},u.prototype.removeMediator=function(t){var e=this.mediatorMap[t];if(e){for(var n=e.listNotificationInterests(),o=0;o<n.length;o++)this.removeObserver(n[o],e);delete this.mediatorMap[t],e.onRemove()}return e},u.prototype.hasMediator=function(t){return null!=this.mediatorMap[t]},u.removeView=function(t){delete u.instanceMap[t]},u.prototype.mediatorMap=null,u.prototype.observerMap=null,u.instanceMap=[],u.prototype.multitonKey=null,u.MULTITON_MSG="View instance for this Multiton key already constructed!",l.prototype.initializeModel=function(){},l.getInstance=function(t){return null==t?null:(null==l.instanceMap[t]&&(l.instanceMap[t]=new l(t)),l.instanceMap[t])},l.prototype.registerProxy=function(t){t.initializeNotifier(this.multitonKey),this.proxyMap[t.getProxyName()]=t,t.onRegister()},l.prototype.retrieveProxy=function(t){return this.proxyMap[t]},l.prototype.hasProxy=function(t){return null!=this.proxyMap[t]},l.prototype.removeProxy=function(t){var e=this.proxyMap[t];return e&&(this.proxyMap[t]=null,e.onRemove()),e},l.removeModel=function(t){delete l.instanceMap[t]},l.prototype.proxyMap=null,l.instanceMap=[],l.prototype.multitonKey,l.MULTITON_MSG="Model instance for this Multiton key already constructed!",c.prototype.initializeController=function(){this.view=u.getInstance(this.multitonKey)},c.getInstance=function(t){return null==t?null:(null==this.instanceMap[t]&&(this.instanceMap[t]=new this(t)),this.instanceMap[t])},c.prototype.executeCommand=function(t){var e=this.commandMap[t.getName()];if(null!=e){var n=new e;n.initializeNotifier(this.multitonKey),n.execute(t)}},c.prototype.registerCommand=function(t,n){null==this.commandMap[t]&&this.view.registerObserver(t,new e(this.executeCommand,this)),this.commandMap[t]=n},c.prototype.hasCommand=function(t){return null!=this.commandMap[t]},c.prototype.removeCommand=function(t){this.hasCommand(t)&&(this.view.removeObserver(t,this),this.commandMap[t]=null)},c.removeController=function(t){delete this.instanceMap[t]},c.prototype.view=null,c.prototype.commandMap=null,c.prototype.multitonKey=null,c.instanceMap=[],c.MULTITON_MSG="controller key for this Multiton key already constructed";var f={global:function(){return this}(),extend:function(t,e){if("function"!=typeof t)throw new TypeError("#extend- child should be Function");if("function"!=typeof e)throw new TypeError("#extend- parent should be Function");if(e!==t){var n=new Function;return n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},decorate:function(t,e){for(var n in e)t[n]=e[n];return t}};t.puremvc={View:u,Model:l,Controller:c,SimpleCommand:i,MacroCommand:r,Facade:p,Mediator:s,Observer:e,Notification:n,Notifier:o,Proxy:a,define:y,declare:h}}}(this),function(t){function e(t,e,n,o){this.name=t,e&&(this.entering=e),n&&(this.exiting=n),o&&(this.changed=o),this.transitions={}}function n(){puremvc.Mediator.call(this,n.NAME,null)}function o(t){puremvc.Notifier.call(this),this.fsm=t}null==t&&(t=window),t.puremvc.statemachine||(e.prototype.defineTrans=function(t,e){null==this.getTarget(t)&&(this.transitions[t]=e)},e.prototype.removeTrans=function(t){delete this.transitions[t]},e.prototype.getTarget=function(t){return this.transitions[t]?this.transitions[t]:null},e.prototype.name=null,e.prototype.entering=null,e.prototype.exiting=null,e.prototype.changed=null,e.prototype.transitions=null,n.prototype=new puremvc.Mediator,n.prototype.constructor=n,n.prototype.onRegister=function(){this.initial&&this.transitionTo(this.initial,null)},n.prototype.registerState=function(t,e){null!=t&&null==this.states[t.name]&&(this.states[t.name]=t,e&&(this.initial=t))},n.prototype.removeState=function(t){var e=this.states[t];null!=e&&(this.states[t]=null)},n.prototype.transitionTo=function(t,e){if(null!=t){if(this.canceled=!1,this.getCurrentState()&&this.getCurrentState().exiting&&this.sendNotification(this.getCurrentState().exiting,e,t.name),this.canceled)return void(this.canceled=!1);if(t.entering&&this.sendNotification(t.entering,e),this.canceled)return void(this.canceled=!1);this.setCurrentState(t),t.changed&&this.sendNotification(this.getCurrentState().changed,e),this.sendNotification(n.CHANGED,this.getCurrentState(),this.getCurrentState().name)}},n.prototype.listNotificationInterests=function(){return[n.ACTION,n.CANCEL]},n.prototype.handleNotification=function(t){switch(t.getName()){case n.ACTION:var e=t.getType(),o=this.getCurrentState().getTarget(e),i=this.states[o];i&&this.transitionTo(i,t.getBody());break;case n.CANCEL:this.canceled=!0}},n.prototype.getCurrentState=function(){return this.viewComponent},n.prototype.setCurrentState=function(t){this.viewComponent=t},n.prototype.states={},n.prototype.initial=null,n.prototype.canceled=null,n.NAME="StateMachine",n.ACTION=n.NAME+"/notes/action",n.CHANGED=n.NAME+"/notes/changed",n.CANCEL=n.NAME+"/notes/cancel",o.prototype=new puremvc.Notifier,o.prototype.constructor=o,o.prototype.inject=function(){for(var t=new puremvc.statemachine.StateMachine,e=this.getStates(),n=0;n<e.length;n++)t.registerState(e[n],this.isInitial(e[n].name));this.facade.registerMediator(t)},o.prototype.getStates=function(){if(null==this.stateList){this.stateList=[];for(var t=this.fsm.state?this.fsm.state:[],e=0;e<t.length;e++){var n=t[e],o=this.createState(n);this.stateList.push(o)}}return this.stateList},o.prototype.createState=function(t){for(var e=t["@name"],n=t["@exiting"],o=t["@entering"],i=t["@changed"],r=new puremvc.statemachine.State(e,o,n,i),s=t.transition?t.transition:[],a=0;a<s.length;a++){var p=s[a];r.defineTrans(p["@action"],p["@target"])}return r},o.prototype.isInitial=function(t){var e=this.fsm["@initial"];return t==e},o.prototype.fsm=null,o.prototype.stateList=null,t.puremvc.statemachine={},t.puremvc.statemachine.State=e,t.puremvc.statemachine.StateMachine=n,t.puremvc.statemachine.FSMInjector=o)}(this);